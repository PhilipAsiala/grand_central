<form>
  <label>Cloud Source Price Path</label>
  <description>Price path for customers</description>
  <fieldset submitButton="true" autoRun="true" formaction="$docurl$" target="picture_frame">
    <input type="text" token="splunklic">
      <label>Splunk License</label>
    </input>
    <input type="dropdown" token="perclic">
      <label>Percent License</label>
      <choice value=".05">5%</choice>
      <choice value=".10">10%</choice>
      <choice value=".15">15%</choice>
      <choice value=".20">20%</choice>
      <default>.10</default>
    </input>
    <input type="dropdown" token="cloud" searchWhenChanged="true">
      <label>Cloud Provider</label>
      <choice value="aws">Amazon</choice>
      <choice value="gcp">Google</choice>
      <choice value="azure">Azure</choice>
      <choice value="vmware">VMware</choice>
    </input>
    <input type="dropdown" token="size" searchWhenChanged="true">
      <label>Cloud Deployment Size</label>
      <choice value="s">Small</choice>
      <choice value="m">Medium</choice>
      <choice value="l">Large</choice>
      <choice value="xl">X-Large</choice>
    </input>
    <input type="dropdown" token="ds" searchWhenChanged="true">
      <label>Data Sources</label>
      <fieldForLabel>datasources</fieldForLabel>
      <fieldForValue>datasources</fieldForValue>
      <search>
        <query>| inputlookup cloud_gdi | search vendor=$cloud$ | dedup datasources</query>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </search>
      <choice value="*">All</choice>
    </input>
    <input type="link" token="method" searchWhenChanged="true">
      <label>Collection Method</label>
      <fieldForLabel>method</fieldForLabel>
      <fieldForValue>method</fieldForValue>
      <search>
        <query>| inputlookup cloud_gdi | search vendor=$cloud$ size=$size$ datasources=$ds$ | dedup method | table method</query>
      </search>
    </input>
    <input type="link" token="input" searchWhenChanged="true">
      <label>Input type</label>
      <fieldForLabel>input</fieldForLabel>
      <fieldForValue>input</fieldForValue>
      <search>
        <query>| inputlookup cloud_gdi | search vendor=$cloud$ size=$size$ datasources=$ds$ | dedup input | table input</query>
      </search>
    </input>
    <input type="dropdown" token="dt" searchWhenChanged="true">
      <label>Deployment Type</label>
      <choice value="sc">Splunk Cloud</choice>
      <choice value="byol">BYOL</choice>
    </input>
    <input type="link" token="docurl" searchWhenChanged="false">
      <label>Documentation URL</label>
      <fieldForLabel>docurl</fieldForLabel>
      <fieldForValue>docurl</fieldForValue>
      <search>
        <query>| inputlookup cloud_gdi | search vendor=$cloud$ size=$size$ datasources=$ds$ | dedup docurl | table docurl</query>
      </search>
    </input>
    <input type="link" token="archurl" searchWhenChanged="false">
      <label>Architecture URL</label>
      <fieldForLabel>archurl</fieldForLabel>
      <fieldForValue>archurl</fieldForValue>
      <search>
        <query>| inputlookup cloud_gdi | search vendor=$cloud$ size=$size$ datasources=$ds$ | dedup archurl | table archurl</query>
      </search>
    </input>
    <input type="link" token="hwurl" searchWhenChanged="false">
      <label>Hardware URL</label>
      <fieldForLabel>hwurl</fieldForLabel>
      <fieldForValue>hwurl</fieldForValue>
      <search>
        <query>| inputlookup cloud_gdi | search vendor=$cloud$ size=$size$ datasources=$ds$ | dedup hwurl | table hwurl</query>
      </search>
    </input>
  </fieldset>
  <row>
    <panel>
      <title>Data Sources for $cloud$</title>
      <table>
        <search>
          <query>| inputlookup cloud_gdi 
| search vendor=$cloud$ 
| dedup datasources 
| eval lic=$splunklic$
| eval perc=$perclic$
| eval gbused=lic*perc
| foreach datasources* [eval perc_gbused=gbused*perc_lic] 
| table datasources perc_gbused 
| addcoltotals</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </table>
    </panel>
    <panel>
      <title>Resource Usage</title>
      <single>
        <title>License Usage</title>
        <search>
          <query>| makeresults 
| eval lic=$splunklic$
| eval perc=$perclic$
| eval cost=lic*perc
| table cost</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="numberPrecision">0.0</option>
        <option name="rangeColors">["0x53a051","0x0877a6","0xf8be34","0xf1813f","0xdc4e41"]</option>
        <option name="refresh.display">progressbar</option>
        <option name="underLabel">GB/Day</option>
      </single>
      <single>
        <title>Bandwidth Requirements</title>
        <search>
          <query>| makeresults | eval bandwidth=((((($splunklic$/10)*8)*1024)/86400)) | fields bandwidth</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="numberPrecision">0.000</option>
        <option name="rangeColors">["0x53a051","0x0877a6","0xf8be34","0xf1813f","0xdc4e41"]</option>
        <option name="refresh.display">progressbar</option>
        <option name="underLabel">Mbps</option>
      </single>
    </panel>
    <panel>
      <title>Helpful Links and Architecture</title>
      <html>
      <p>
        <h2>
            Documentation Link for $ds$ :<a href="$docurl$" target="picture_frame">$docurl$</a>
          </h2>
      </p>
      <p>
      <h2>
          Hardware Link for $ds$ : <a href="$hwurl$" target="picture_frame">$hwurl$</a>
      </h2>
      </p>
      <p>
        For AWS, you can use this link to help determine the size of your environment: <a href="https://github.com/amiracle/cooking_with_Splunk_and_AWS/blob/master/11%20-%20Sizing%20AWS%20Environment.pptx">AWS Sizing Help</a>
      </p>
      <p>
        Example Architecture Design : <img src="$archurl$" target="picture_frame"/>
      </p>
        <p>$archurl$</p>
      <ifrmae name="picture_frame" height="600px" width="100%" style="border:2px;"/>
    </html>
    </panel>
  </row>
</form>